#!/bin/sh
POOL=${1:-./brico/brico.pool}
INPUTS=$(dirname ${POOL})
OUTPUT_DIR="${INPUTS}_fresh"
OUTPUTS=${2:-${OUTPUT_DIR}}
if [ ! -d ${OUTPUTS} ]; then
    mkdir ${OUTPUTS};
fi;
if [ ! -z "${BRICOSOURCE}" ]; then
    export KNO_BRICOSOURCE=${BRICOSOURCE};
elif test -f ./brico/brico.pool; then
    export BRICOSOURCE=./brico/;
    export KNO_BRICOSOURCE=./brico/;
fi
index/core.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${BRICOSOURCE} ${POOL}
index/lattices.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${BRICOSOURCE} ${POOL}
index/relations.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${BRICOSOURCE} ${POOL}
index/english.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${BRICOSOURCE} ${POOL}
index/words.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${BRICOSOURCE} ${POOL}
index/termlogic.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${BRICOSOURCE} ${POOL}
